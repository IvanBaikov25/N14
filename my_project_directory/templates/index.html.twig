<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üçΩÔ∏è –ê–¥–º–∏–Ω–∫–∞ ‚Äî –µ–¥–∞ –≤ –¥–µ–ª–µ!</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; }
        section { margin-bottom: 40px; }
        h2 { color: #d32f2f; }
        form { background: #f9f9f9; padding: 15px; border-radius: 5px; margin: 15px 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: left; }
        th { background: #eee; }
        .error { color: red; margin: 10px 0; }
    </style>
</head>
<body>

<h1>üçΩÔ∏è –ê–¥–º–∏–Ω–∫–∞ ‚Äî –≤—Å—ë –ø–æ–¥ —Ä—É–∫–æ–π</h1>

{% if errors %}
    <div class="error">
        {% for error in errors %}‚Ä¢ {{ error }}<br>{% endfor %}
    </div>
{% endif %}

<!-- –ö–õ–ò–ï–ù–¢–´ -->
<section>
    <h2>üë• –ö–ª–∏–µ–Ω—Ç—ã</h2>
    <form method="POST">
        <input type="text" name="client_name" placeholder="–ò–º—è *" required> 
        <input type="text" name="client_phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω *" required>
        <button type="submit" name="add_client">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <table>
        <tr><th>ID</th><th>–ò–º—è</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th></tr>
        {% for c in clients %}
            <tr><td>{{ c.id }}</td><td>{{ c.name }}</td><td>{{ c.phone }}</td></tr>
        {% else %}
            <tr><td colspan="3">‚Äî –Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Äî</td></tr>
        {% endfor %}
    </table>
</section>

<!-- –ë–õ–Æ–î–ê -->
<section>
    <h2>üç≤ –ë–ª—é–¥–∞</h2>
    <form method="POST">
        <input type="text" name="dish_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ *" required>
        <input type="number" step="0.01" name="dish_price" placeholder="–¶–µ–Ω–∞ (>0) *" required min="0.01">
        <button type="submit" name="add_dish">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <table>
        <tr><th>ID</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–¶–µ–Ω–∞</th></tr>
        {% for d in dishes %}
            <tr><td>{{ d.id }}</td><td>{{ d.name }}</td><td>{{ d.price }} ‚ÇΩ</td></tr>
        {% else %}
            <tr><td colspan="3">‚Äî –Ω–µ—Ç –±–ª—é–¥ ‚Äî</td></tr>
        {% endfor %}
    </table>
</section>

<!-- –ó–ê–ö–ê–ó–´ -->
<section>
    <h2>üì¶ –ó–∞–∫–∞–∑—ã</h2>
    <form method="POST">
        <label>–ö–ª–∏–µ–Ω—Ç:</label>
        <select name="order_client" required>
            <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
            {% for c in clients %}
                <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
        </select>

        <br><br><label>–ë–ª—é–¥–∞ (‚â•1):</label><br>
        {% for d in dishes %}
            <label>
                <input type="checkbox" name="order_dishes[]" value="{{ d.id }}">
                {{ d.name }} ({{ d.price }} ‚ÇΩ)
            </label><br>
        {% else %}
            <em>‚Äî —Å–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞ ‚Äî</em>
        {% endfor %}

        <br><br>
        <button type="submit" name="add_order"
            {% if not clients or not dishes %} disabled {% endif %}>
            üì• –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
        </button>
    </form>

    <table>
        <tr><th>ID</th><th>–ö–ª–∏–µ–Ω—Ç</th><th>–ë–ª—é–¥–∞</th><th>–í—Ä–µ–º—è</th></tr>
        {% for o in orders %}
            <tr>
                <td>{{ o.id }}</td>
                <td>{{ o.client.name }}</td>
                <td>
                    {% for dish in o.dishes %}
                        {{ dish.name }} ({{ dish.price }} ‚ÇΩ)<br>
                    {% endfor %}
                </td>
                <td>{{ o.createdAt|date('H:i d/m') }}</td>
            </tr>
        {% else %}
            <tr><td colspan="4">‚Äî –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤ ‚Äî</td></tr>
        {% endfor %}
    </table>
</section>

</body>
</html>